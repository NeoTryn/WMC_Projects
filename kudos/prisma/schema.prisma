model User {
  id            String      @id @default(auto()) @map("_id") @db.ObjectId
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  email         String   @unique
  password      String
  profile       Profile?

  // Relations
  authoredKudos Kudo[]   @relation("AuthoredKudos")
  receivedKudos Kudo[]   @relation("ReceivedKudos")
}

enum Department {
  MARKETING
  ENGINEERING
  DESIGN
  HR
}

enum Emoji {
  THUMBSUP
  HEART
  STAR
  TROPHY
}

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Profile {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  user      User   @relation(fields: [authorId], references: [id])
  authorId  String @unique @db.ObjectId
  firstName String
  lastName  String
  department Department? @default(ENGINEERING)
  profilePicture String?
}


model Kudo {
  id             String @id @default(auto()) @map("_id") @db.ObjectId
  message        String
  createdAt      DateTime @default(now())

  // Kudo style attributes as separate fields
  backgroundColor String   @default("YELLOW")
  textColor       String   @default("WHITE")
  emoji           Emoji?   @default(THUMBSUP)

  // Author and recipient relations
  author          User     @relation("AuthoredKudos", fields: [authorId], onDelete:Cascade, references: [id])
  authorId        String   @db.ObjectId
  recipient       User     @relation("ReceivedKudos", fields: [recipientId], references: [id])
  recipientId     String   @db.ObjectId
}